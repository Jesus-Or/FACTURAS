<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Mensual</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        .estado-subio { color: green; font-weight: bold; }
        .estado-bajo { color: red; font-weight: bold; }
        .estado-estable { color: orange; font-weight: bold; }
        .estado-nuevo { color: blue; font-weight: bold; }
    </style>
</head>
<body class="container mt-4">

    <h1 class="mb-4">ðŸ“Š Dashboard de Servicios por Mes</h1>

    <% dashboardData.forEach(mes => { %>
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4><%= mes.mesNombre %> <%= mes.anio %></h4>
                <small>Total dispositivos: <%= mes.totalDispositivos %></small>
            </div>
            <div class="card-body">

                <table class="table table-bordered table-striped">
                    <thead class="table-dark">
                        <tr>
                            <th>Servicio</th>
                            <th>Cant. Anterior</th>
                            <th>Cant. Actual</th>
                            <th>Diferencia</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% mes.servicios.forEach(serv => { %>
                        <tr>
                            <td><%= serv.nombre %></td>

                            <td><%= serv.cantidadAnterior %></td>

                            <td><%= serv.cantidad %></td>

                            <td>
                                <% if (serv.diferencia > 0) { %>
                                    +<%= serv.diferencia %>
                                <% } else { %>
                                    <%= serv.diferencia %>
                                <% } %>
                            </td>

                            <td>
                                <% if (serv.estado === 'SubiÃ³') { %>
                                    <span class="estado-subio">â¬† SubiÃ³</span>
                                <% } else if (serv.estado === 'BajÃ³') { %>
                                    <span class="estado-bajo">â¬‡ BajÃ³</span>
                                <% } else if (serv.estado === 'Estable') { %>
                                    <span class="estado-estable">â‡† Estable</span>
                                <% } else { %>
                                    <span class="estado-nuevo">ðŸ†• Nuevo</span>
                                <% } %>
                            </td>
                        </tr>
                        <% }) %>
                    </tbody>
                </table>

            </div>
        </div>
    <% }) %>

</body>
</html>
